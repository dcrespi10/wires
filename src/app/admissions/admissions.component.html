<div class="wrapper">
    <div class="sidebar" data-color="red" data-image="">
        <sidebar></sidebar>
        <div class="sidebar-background" style="background-image: url(/assets/img/sidebar-5.jpg)"></div>
    </div>      
    <div class="main-panel" *ngIf="form != undefined">
        <div class="navbar navbar-default" id="mobnav">
            <div class="container-fluid">
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-left">
                        <li class="dropdown" *ngIf="admissionId">                            
                            <a class="navbar-brand" matTooltip="Back to admissions list" (click)="loadAdmissionsList()" >
                                <i class="pe-7s-back-2" ></i>                                  
                            </a>
                        </li>
                        <li *ngIf="admissionId">
                            <a (click)="saveAdmission()" matTooltip="Save">
                                <i class="pe-7s-diskette"></i>                                
                            </a>
                        </li>
                        <li *ngIf="!admissionId">
                            <a (click)="admissionId = 'newid'; model={complete:false, hasErrors:false}" matTooltip="New admission">
                                <i class="pe-7s-plus"></i>                                    
                            </a>                                
                        </li>
                        <li *ngIf="!admissionId">
                            <a matTooltip="Export data">
                                <i class="pe-7s-server"></i>                                    
                            </a>                                
                        </li>
                        <li *ngIf="!admissionId">
                            <mat-form-field style="padding: 5px 10px 0px 0px;margin: 10px 3px 0px 0px;">
                                <mat-select [(value)]="filterByStatusSelected" placeholder="Show">
                                    <mat-option *ngFor="let mode of filterByStatusOptions" [value]="mode">
                                    {{ mode }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>                           
                        </li>
                        <li *ngIf="!admissionId">
                            <input [(ngModel)]="filterByText" matInput placeholder="Search" style="padding: 10px 5px 0px 0px;margin: 10px 3px 0px 0px;">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="main-content col-md-12">
            <span *ngIf="!admissionId">
                <div style="margin-top:40px;">
                    <mat-nav-list>
                        <span *ngFor="let admission of admissionList">
                            <mat-list-item *ngIf="filteredRecord(admission, filterByStatusSelected)">                             
                                <a matLine>
                                    {{ admission.customId }}, age:
                                    {{ admission.age }} | Record                             
                                    <span *ngIf="admission.complete">completed</span>
                                    <span *ngIf="!admission.complete">not completed</span>
                                    <span *ngIf="admission.hasErrors">with</span>
                                    <span *ngIf="!admission.hasErrors">without</span> errors                            
                                </a>
                                <button mat-button color="warn" (click)="loadAdmission(admission._id)">Open</button>
                            </mat-list-item>
                        </span>
                    </mat-nav-list>
                </div>                    
                
            </span>            
            <span *ngIf="admissionId">
                <data-collection [(collectionId)]="admissionId" [(userid)]="id" 
                [(form)]="form" [(model)]="model" (valueHasChangedEmitter)="valueHasChanged($event)"
                [unsavedState]="unsaved"></data-collection>                                
            </span>
        </div>        
    </div>
</div>